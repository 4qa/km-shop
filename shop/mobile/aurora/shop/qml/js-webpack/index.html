<!DOCTYPE html>
<html lang="en" style="height: 100%; width: 100%;">

<head>
    <meta charset="utf-8">
    <title>KMM Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="./kmm.min.js"></script>
</head>

<body>
    <script type="text/javascript">

        function action(topic) {
            send("Loading...")
            setTimeout(async () => {
                try {
                    const count = await $.getCategoriesCount()
                    send(`${count}`)
                } catch (e) {
                    send(e)
                }
            }, 1000)
        }

        function send(topic) {
            var customEvent = new CustomEvent("framescript:log",
                {detail: { topic: topic}});
            document.dispatchEvent(customEvent);
        }

        action('getCategoriesCount')
    </script>
</body>
</html>

